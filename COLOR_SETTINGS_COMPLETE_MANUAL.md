# Notion Effect Blog カラー設定管理システム 完全マニュアル

## 目次
1. [システム概要](#1-システム概要)
2. [アクセス方法](#2-アクセス方法)
3. [管理画面の使い方](#3-管理画面の使い方)
4. [カラープリセットの使い方](#4-カラープリセットの使い方)
5. [設定可能な要素一覧](#5-設定可能な要素一覧)
6. [黄色背景の変更方法（具体例）](#6-黄色背景の変更方法具体例)
7. [エクスポート・インポート機能](#7-エクスポートインポート機能)
8. [トラブルシューティング](#8-トラブルシューティング)
9. [システム構造（技術仕様）](#9-システム構造技術仕様)
10. [よくある質問（FAQ）](#10-よくある質問faq)

---

## 1. システム概要

### 1.1 カラー管理システムとは
Notion Effect Blogのカラー管理システムは、サイト全体の配色をGUIで簡単に管理できるシステムです。CSSの知識がなくても、視覚的に色を選択・変更でき、リアルタイムでプレビューを確認できます。

### 1.2 主な特徴
- **ノーコード操作**: プログラミング知識不要
- **リアルタイムプレビュー**: 変更が即座に反映（1200pxの大型プレビュー）
- **カテゴリー別管理**: 要素を8つのグループに整理
- **プリセット機能**: デフォルト、ダークモード、セピアモード
- **インポート/エクスポート**: 設定の保存と共有
- **レスポンシブ対応**: モバイルでも操作可能
- **クラス名表示**: 各設定項目にCSSクラス名とファイルパスを表示

### 1.3 システムのメリット
- デザインの一貫性を保持
- ブランドカラーの統一管理
- ダークモード対応が簡単
- チーム間での設定共有が可能
- CSS知識不要で配色変更

---

## 2. アクセス方法

### 2.1 管理画面URL
```
開発環境: http://localhost:3000/admin/color-settings
本番環境: https://your-domain.vercel.app/admin/color-settings
```

### 2.2 認証情報
```
パスワード: your_admin_password
```
※ 環境変数 `NEXT_PUBLIC_ADMIN_PASSWORD` で変更可能

### 2.3 ログイン手順
1. 上記URLにアクセス
2. パスワード入力画面が表示
3. パスワードを入力して「ログイン」をクリック
4. 認証成功後、管理画面が表示

※ セッションストレージに保存されるため、ブラウザを閉じるまで再ログイン不要

---

## 3. 管理画面の使い方

### 3.1 画面構成

#### ヘッダー部分
- **タイトル**: カラー設定管理
- **サブタイトル**: Notion Effect Blog の配色をカスタマイズ
- **背景**: 青から緑へのグラデーション

#### カラープリセット
- プリセットカードが横並びで表示
- クリックで即座に配色変更
- 選択中のプリセットは青い枠で囲まれる

#### 設定カテゴリー（8つ）
1. **🎨 基本要素**: ページ全体、ヘッダー、フッター、サイドバー
2. **📝 テキスト要素**: タイトル、見出し1-3、本文、リンク
3. **💻 コード・引用**: コードブロック、インラインコード、引用
4. **🔄 インタラクティブ要素**: コールアウト、トグル、ボタン
5. **📊 データベース**: テーブル、リストアイテム、ギャラリーカード
6. **🏷️ データベースのタグ**: セレクトプロパティの色（黄、青、緑、ピンク、グレー）
7. **🎨 テキストの背景色**: テキストブロックの背景色（黄、青、ピンク、紫、緑、グレー）
8. **🎯 その他**: テキスト選択時のハイライト色

#### 操作ボタン
- **設定を保存**: 変更を保存
- **プレビューを表示/隠す**: ライブプレビューの表示切替
- **デフォルトに戻す**: すべての設定を初期状態に
- **エクスポート**: 設定をJSONファイルで保存
- **インポート**: JSONファイルから設定を読み込み
- **キャッシュをクリア**: LocalStorageをクリア

### 3.2 基本操作

#### 3.2.1 色の変更方法
1. **カラースウォッチ（色見本）をクリック**
   - システムのカラーピッカーが開く
   - 好きな色を選択

2. **16進数で直接入力**
   - テキストボックスに `#FF5733` のような形式で入力
   - `#` から始まる6文字の16進数

3. **透明に設定**
   - 「透明」ボタンをクリック
   - 背景色を透明にしたい場合に使用

#### 3.2.2 各設定項目の説明
- **背景色**: 要素の背景色
- **テキスト色**: 文字の色
- **ボーダー色**: 枠線の色
- **ホバー背景色**: マウスを乗せた時の背景色
- **ホバー文字色**: マウスを乗せた時の文字色

#### 3.2.3 クラス名とファイルパス
各設定項目の下に表示される情報：
- **CSSクラス**: 例 `.notion-yellow_background`
- **ファイル**: `styles/notion.css`

---

## 4. カラープリセットの使い方

### 4.1 カラープリセットとは？
あらかじめ用意された配色パターンです。ワンクリックで全体の配色を変更できます。

### 4.2 使い方
1. 「カラープリセット」セクションで好きなプリセットをクリック
2. 選択されたプリセットが青い枠で囲まれます
3. すぐに配色が変更されます
4. プリセット適用後も、個別に色を調整できます

### 4.3 利用可能なプリセット

#### デフォルト
- **説明**: 標準的な配色
- **特徴**: 明るく読みやすい、白背景ベース

#### ダークモード
- **説明**: 目に優しいダークテーマ
- **特徴**: 暗い背景、明るい文字、夜間の閲覧に最適

#### セピア
- **説明**: 温かみのある配色
- **特徴**: クリーム色の背景、茶系の文字、長時間の読書向け

#### カスタム
- **説明**: 手動で設定
- **特徴**: プリセット以外の設定を行うと自動的に選択される

---

## 5. 設定可能な要素一覧

### 5.1 基本要素
| 要素 | 説明 | CSSクラス |
|-----|------|-----------|
| ページ全体 | サイト全体の背景と文字色 | `body, .notion-app-inner` |
| ヘッダー | 上部ナビゲーション部分 | `.notion-header, .header` |
| フッター | ページ下部 | `.footer` |
| サイドバー | サイドメニュー | `.notion-aside` |

### 5.2 テキスト要素
| 要素 | 説明 | CSSクラス |
|-----|------|-----------|
| ページタイトル | ページの大見出し | `.notion-page-title-text` |
| 見出し1 (H1) | 最大の見出し | `.notion-header-block` |
| 見出し2 (H2) | 中見出し | `.notion-sub_header-block` |
| 見出し3 (H3) | 小見出し | `.notion-sub_sub_header-block` |
| 本文 | 通常のテキスト | `.notion-text-block` |
| リンク | クリック可能なリンク | `.notion-link` |

### 5.3 コード・引用
| 要素 | 説明 | CSSクラス |
|-----|------|-----------|
| コードブロック | 複数行のコード | `.notion-code-block` |
| インラインコード | 文中のコード | `.notion-inline-code` |
| 引用 | 引用ブロック | `.notion-quote-block` |

### 5.4 インタラクティブ要素
| 要素 | 説明 | CSSクラス |
|-----|------|-----------|
| コールアウト | 注意喚起ボックス | `.notion-callout-block` |
| トグル | 開閉可能なリスト | `.notion-toggle` |
| ボタン | クリック可能なボタン | `.notion-button` |

### 5.5 データベース
| 要素 | 説明 | CSSクラス |
|-----|------|-----------|
| テーブル | 表形式のデータ | `.notion-table` |
| リストアイテム | リスト表示の項目 | `.notion-list-item` |
| ギャラリーカード | カード形式の表示 | `.notion-gallery-card` |

### 5.6 データベースのタグ
| 要素 | 説明 | CSSクラス |
|-----|------|-----------|
| 黄色タグ | セレクトプロパティの黄色 | `.notion-property-select-item, .notion-item-yellow` |
| 青タグ | セレクトプロパティの青 | `.notion-property-select-item.notion-item-blue` |
| 緑タグ | セレクトプロパティの緑 | `.notion-property-select-item.notion-item-green` |
| ピンクタグ | セレクトプロパティのピンク | `.notion-property-select-item.notion-item-pink` |
| グレータグ | セレクトプロパティのグレー | `.notion-property-select-item.notion-item-gray` |

### 5.7 テキストの背景色
| 要素 | 説明 | CSSクラス |
|-----|------|-----------|
| 黄色背景 | テキストの黄色ハイライト | `.notion-yellow_background` |
| 青背景 | テキストの青ハイライト | `.notion-blue_background` |
| ピンク背景 | テキストのピンクハイライト | `.notion-pink_background` |
| 紫背景 | テキストの紫ハイライト | `.notion-purple_background` |
| 緑背景 | テキストの緑ハイライト | `.notion-green_background` |
| グレー背景 | テキストのグレーハイライト | `.notion-gray_background` |

### 5.8 その他
| 要素 | 説明 | CSSクラス |
|-----|------|-----------|
| テキスト選択 | ドラッグ選択時のハイライト | `::selection` |

---

## 6. 黄色背景の変更方法（具体例）

### 6.1 どの黄色背景を変更したいか確認

Notionには2種類の黄色背景があります：

#### A. データベースのタグ（黄色）
- **場所**: 「データベースのタグ」セクション
- **設定名**: データベースタグ（黄色）
- **用途**: データベースのセレクトプロパティやマルチセレクトプロパティの黄色タグ
- **CSSクラス**: `.notion-property-select-item`, `.notion-item-yellow`

#### B. テキストの背景色（黄色）
- **場所**: 「テキストの背景色」セクション
- **設定名**: テキスト背景（黄色）
- **用途**: ページ内のテキストブロック（見出し、段落など）の黄色背景
- **CSSクラス**: `.notion-yellow_background`

### 6.2 設定の変更手順

1. カラー設定管理ページ（/admin/color-settings）にアクセス
2. 「テキストの背景色」セクションを展開（クリック）
3. 「テキスト背景（黄色）」を探す
4. 背景色のカラースウォッチをクリックまたは入力欄に新しい色コードを入力
5. 「設定を保存」ボタンをクリック

### 6.3 よく使う黄色のカラーコード

- `#fbf3db` - デフォルト（薄い黄色）
- `#fff9c4` - 明るい黄色（現在の設定）
- `#fffde7` - とても薄い黄色
- `#ffeb3b` - 鮮やかな黄色
- `#fdd835` - 濃い黄色

### 6.4 確認方法

設定を変更すると、以下の要素の背景色が変わります：
- Notionページ内で黄色背景に設定した見出し
- Notionページ内で黄色背景に設定した段落
- Notionページ内で黄色背景に設定したその他のテキストブロック

---

## 7. エクスポート・インポート機能

### 7.1 エクスポート（書き出し）
現在の色設定を外部ファイルとして保存する機能です。

**使い方**:
1. 「エクスポート」ボタンをクリック
2. `color-settings-[日付].json`というファイルがダウンロードされます
3. このファイルには現在のすべての色設定が含まれています

**用途**:
- 色設定のバックアップ
- 他の環境への設定の移行
- チームメンバーとの設定共有
- カスタムプリセットとして保存

### 7.2 インポート（読み込み）
保存したJSONファイルから色設定を復元する機能です。

**使い方**:
1. 「インポート」ボタンをクリック
2. ファイル選択ダイアログが開きます
3. エクスポートしたJSONファイルを選択
4. 色設定が即座に適用されます

**注意事項**:
- 無効なJSONファイルを選択するとエラーが表示されます
- インポート前の設定は上書きされます（事前にエクスポートを推奨）
- ファイル形式は必ずJSON形式である必要があります

---

## 8. トラブルシューティング

### 8.1 設定が保存されない場合
1. 「キャッシュをクリア」ボタンをクリック
2. ページを再読み込み（Ctrl+Shift+R または Cmd+Shift+R）
3. 設定を再度行い、「設定を保存」をクリック

### 8.2 色が反映されない場合
1. ブラウザのキャッシュをクリア
2. 開発者ツールでコンソールエラーを確認
3. 「キャッシュをクリア」後に再設定
4. プレビューの更新ボタンをクリック

### 8.3 プリセットが適用されない場合
1. 別のプリセットを一度選択
2. 希望のプリセットを再度選択
3. 「設定を保存」をクリック

### 8.4 「テキストの背景色」セクションが空の場合
1. 「キャッシュをクリア」ボタンをクリック
2. ページを再読み込み
3. それでも表示されない場合は、古いキャッシュが原因の可能性

### 8.5 透明ボタンのレイアウトが崩れる場合
1. ブラウザの画面幅を調整（最小幅350px推奨）
2. ズームレベルを100%に設定
3. 別のブラウザで試す

### 8.6 ログインできない場合
1. パスワードが正しいか確認
2. 環境変数 `NEXT_PUBLIC_ADMIN_PASSWORD` を確認
3. ブラウザのCookieとキャッシュをクリア

---

## 9. システム構造（技術仕様）

### 9.1 ファイル構成
```
notion-effect-blog2/
├── components/
│   ├── ColorSettingsPanel.jsx      # 管理画面UI
│   ├── ColorSettingsPanel.module.css # 管理画面スタイル
│   └── ColorStyler.jsx             # CSS動的注入コンポーネント
├── lib/
│   └── color-customizer/
│       ├── color-settings.js       # デフォルト設定・プリセット
│       └── color-utils.js          # ユーティリティ関数
├── pages/
│   ├── admin/
│   │   └── color-settings.jsx      # 管理画面ページ
│   └── api/
│       └── color-settings.js       # APIエンドポイント
├── styles/
│   └── notion.css                  # Notionのスタイル（変更対象）
└── color-settings.json             # 保存された設定（自動生成）
```

### 9.2 データフロー
1. **設定変更時**
   - ユーザーが管理画面で色を変更
   - リアルタイムでColorStylerコンポーネントに通知
   - CSSが動的に生成・適用
   - 保存ボタンでAPIに送信

2. **ページ読み込み時**
   - ColorStylerがLocalStorageを確認
   - キャッシュがない場合はAPIから取得
   - CSSを生成してページに適用

### 9.3 LocalStorageの構造
```javascript
{
  "colorSettings": {/* 色設定オブジェクト */},
  "colorSettingsTimestamp": "1733674800000" // 24時間キャッシュ
}
```

### 9.4 CSS生成の仕組み
- 各設定にはCSSクラス名が含まれる
- `!important` を付けて優先度を確保
- 背景画像のリセット（グラデーション対応）
- 動的に`<style>`タグを生成して挿入

---

## 10. よくある質問（FAQ）

### Q: フォント設定と併用できますか？
A: はい、フォント設定システムと完全に独立して動作します。両方同時に使用可能です。

### Q: 部分的に色を変更できますか？
A: はい、各要素個別に設定可能です。必要な要素だけ変更できます。

### Q: モバイルで管理画面は使えますか？
A: はい、レスポンシブ対応しています。ただし、画面が小さい場合は横スクロールが必要な場合があります。

### Q: 設定はどこに保存されますか？
A: サーバー（color-settings.json）とブラウザ（LocalStorage）の両方に保存されます。

### Q: ダークモードは自動切り替えできますか？
A: 現在は手動切り替えのみです。自動切り替えは今後の機能追加予定です。

### Q: カスタムプリセットは作れますか？
A: エクスポート機能でJSONファイルとして保存し、インポートで再利用できます。

### Q: 設定をリセットする方法は？
A: 「デフォルトに戻す」ボタンをクリックするか、「キャッシュをクリア」後に再読み込みします。

### Q: 他のサイトに設定を移行できますか？
A: エクスポート/インポート機能で設定を移行できます。ただし、CSSクラス名が同じである必要があります。

### Q: 色の変更が一部だけ反映されない場合は？
A: CSSの優先順位の問題です。該当要素のCSSセレクタがより詳細に指定されている可能性があります。

### Q: プレビューが表示されない場合は？
A: JavaScriptが有効になっているか確認してください。また、広告ブロッカーが影響している場合があります。

---

## 更新履歴
- **2025.06.09**: 完全マニュアル統合版作成
  - 3つのマニュアルを統合
  - UIの最新状態を反映
  - トラブルシューティングを追加
- **2025.06.08**: 初版作成
  - カラー管理システム実装
  - 3つのプリセット追加
  - 管理画面UI実装

---

## サポート情報

問題が発生した場合は、以下の情報とともに開発者に連絡してください：
- エラーメッセージ（ある場合）
- ブラウザとバージョン
- 実行した操作の手順
- スクリーンショット（可能であれば）

本マニュアルは随時更新されます。最新版は GitHub リポジトリで確認してください。